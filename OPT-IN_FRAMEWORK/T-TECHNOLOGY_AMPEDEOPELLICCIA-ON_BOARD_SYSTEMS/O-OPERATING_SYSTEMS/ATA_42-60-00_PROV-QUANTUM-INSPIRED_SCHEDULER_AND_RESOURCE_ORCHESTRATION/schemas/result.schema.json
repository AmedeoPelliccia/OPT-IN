{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ampel360.org/schemas/ata42-60/result.schema.json",
  "title": "ATA 42-60-00 Experiment Result Schema",
  "description": "Schema for simulation experiment results and metrics",
  "type": "object",
  "required": ["result_id", "experiment_id", "timestamp", "status", "metrics"],
  "properties": {
    "result_id": {
      "type": "string",
      "description": "Unique result identifier",
      "pattern": "^RESULT-[A-Z0-9-]+$"
    },
    "experiment_id": {
      "type": "string",
      "description": "Reference to experiment that produced this result"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "Result generation timestamp"
    },
    "status": {
      "type": "string",
      "enum": ["success", "failed", "timeout", "partial"],
      "description": "Overall experiment execution status"
    },
    "execution_time_ms": {
      "type": "number",
      "description": "Total experiment execution time"
    },
    "metrics": {
      "type": "object",
      "description": "Collected metrics data",
      "properties": {
        "schedule_quality": {
          "type": "object",
          "properties": {
            "mean": {"type": "number"},
            "median": {"type": "number"},
            "min": {"type": "number"},
            "max": {"type": "number"},
            "stddev": {"type": "number"}
          }
        },
        "cpu_utilization": {
          "type": "object",
          "properties": {
            "mean_percent": {"type": "number"},
            "peak_percent": {"type": "number"},
            "per_partition": {
              "type": "object",
              "additionalProperties": {"type": "number"}
            }
          }
        },
        "deadline_performance": {
          "type": "object",
          "properties": {
            "total_deadlines": {"type": "integer"},
            "met_deadlines": {"type": "integer"},
            "missed_deadlines": {"type": "integer"},
            "miss_rate_percent": {"type": "number"}
          }
        },
        "optimization_performance": {
          "type": "object",
          "properties": {
            "mean_time_ms": {"type": "number"},
            "max_time_ms": {"type": "number"},
            "convergence_iterations_mean": {"type": "number"},
            "fallback_count": {"type": "integer"}
          }
        },
        "power_consumption": {
          "type": "object",
          "properties": {
            "mean_watts": {"type": "number"},
            "peak_watts": {"type": "number"},
            "total_joules": {"type": "number"}
          }
        },
        "fairness": {
          "type": "object",
          "properties": {
            "jain_index": {"type": "number", "minimum": 0, "maximum": 1},
            "max_deviation_percent": {"type": "number"}
          }
        }
      }
    },
    "validation": {
      "type": "object",
      "properties": {
        "criteria_met": {"type": "boolean"},
        "failures": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "criterion": {"type": "string"},
              "expected": {"type": "number"},
              "actual": {"type": "number"},
              "severity": {"type": "string", "enum": ["critical", "major", "minor"]}
            }
          }
        }
      }
    },
    "anomalies": {
      "type": "array",
      "description": "Detected anomalies or unexpected behaviors",
      "items": {
        "type": "object",
        "properties": {
          "timestamp_ms": {"type": "number"},
          "type": {"type": "string"},
          "description": {"type": "string"},
          "severity": {"type": "string", "enum": ["info", "warning", "error", "critical"]}
        }
      }
    },
    "reproducibility": {
      "type": "object",
      "properties": {
        "hash": {"type": "string"},
        "environment": {
          "type": "object",
          "properties": {
            "os": {"type": "string"},
            "python_version": {"type": "string"},
            "dependencies": {
              "type": "object",
              "additionalProperties": {"type": "string"}
            }
          }
        }
      }
    },
    "artifacts": {
      "type": "array",
      "description": "Generated artifacts (logs, plots, data files)",
      "items": {
        "type": "object",
        "properties": {
          "artifact_id": {"type": "string"},
          "type": {"type": "string", "enum": ["log", "plot", "data", "report"]},
          "path": {"type": "string"},
          "size_bytes": {"type": "integer"}
        }
      }
    }
  }
}
