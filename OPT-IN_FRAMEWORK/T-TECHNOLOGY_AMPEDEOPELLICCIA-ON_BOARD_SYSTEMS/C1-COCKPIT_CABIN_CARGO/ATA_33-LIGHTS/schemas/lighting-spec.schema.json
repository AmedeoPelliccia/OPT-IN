{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ampel360.com/schemas/ata33/lighting-spec.schema.json",
  "title": "ATA 33 Lighting Specification Schema",
  "description": "JSON schema for aircraft lighting specifications including photometric, electrical, and environmental parameters",
  "type": "object",
  "required": [
    "spec_id",
    "title",
    "effective_date",
    "light_type",
    "photometric",
    "electrical",
    "environmental"
  ],
  "properties": {
    "spec_id": {
      "type": "string",
      "pattern": "^SPEC_33-[0-9]{2}-[0-9]{2}$",
      "description": "Specification ID in format SPEC_33-XX-XX"
    },
    "title": {
      "type": "string",
      "minLength": 10,
      "description": "Descriptive title of the lighting specification"
    },
    "effective_date": {
      "type": "string",
      "format": "date",
      "description": "Effective date in ISO 8601 format (YYYY-MM-DD)"
    },
    "revision": {
      "type": "string",
      "pattern": "^[A-Z]$",
      "description": "Revision letter (A-Z)"
    },
    "light_type": {
      "type": "string",
      "enum": [
        "INTERIOR_READING",
        "INTERIOR_AISLE",
        "INTERIOR_GALLEY",
        "INTERIOR_LAVATORY",
        "INTERIOR_CABIN_GENERAL",
        "INTERIOR_COCKPIT",
        "EXTERIOR_POSITION",
        "EXTERIOR_NAVIGATION",
        "EXTERIOR_LANDING",
        "EXTERIOR_TAXI",
        "EXTERIOR_ANTICOLLISION",
        "EXTERIOR_LOGO",
        "EMERGENCY_EXIT",
        "EMERGENCY_FLOOR_PATH"
      ],
      "description": "Type of lighting system"
    },
    "photometric": {
      "type": "object",
      "required": ["illuminance", "color_temperature", "cri"],
      "properties": {
        "illuminance": {
          "type": "object",
          "required": ["min_lux", "max_lux", "uniformity_ratio"],
          "properties": {
            "min_lux": {
              "type": "number",
              "minimum": 0,
              "description": "Minimum illuminance in lux"
            },
            "max_lux": {
              "type": "number",
              "minimum": 0,
              "description": "Maximum illuminance in lux"
            },
            "uniformity_ratio": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Uniformity ratio (min/max)"
            },
            "measurement_distance_mm": {
              "type": "number",
              "minimum": 0,
              "description": "Measurement distance in millimeters"
            }
          }
        },
        "color_temperature": {
          "type": "object",
          "required": ["min_kelvin", "max_kelvin"],
          "properties": {
            "min_kelvin": {
              "type": "integer",
              "minimum": 2000,
              "maximum": 10000,
              "description": "Minimum correlated color temperature in Kelvin"
            },
            "max_kelvin": {
              "type": "integer",
              "minimum": 2000,
              "maximum": 10000,
              "description": "Maximum correlated color temperature in Kelvin"
            }
          }
        },
        "cri": {
          "type": "object",
          "required": ["min_ra"],
          "properties": {
            "min_ra": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100,
              "description": "Minimum Color Rendering Index (Ra)"
            }
          }
        },
        "beam_angle_deg": {
          "type": "number",
          "minimum": 0,
          "maximum": 360,
          "description": "Beam angle in degrees"
        }
      }
    },
    "electrical": {
      "type": "object",
      "required": ["voltage_range", "current", "power"],
      "properties": {
        "voltage_range": {
          "type": "object",
          "required": ["min_v", "max_v"],
          "properties": {
            "min_v": {
              "type": "number",
              "minimum": 0,
              "description": "Minimum operating voltage"
            },
            "max_v": {
              "type": "number",
              "minimum": 0,
              "description": "Maximum operating voltage"
            },
            "nominal_v": {
              "type": "number",
              "minimum": 0,
              "description": "Nominal voltage (typically 28VDC)"
            }
          }
        },
        "current": {
          "type": "object",
          "properties": {
            "nominal_ma": {
              "type": "number",
              "minimum": 0,
              "description": "Nominal current in milliamperes"
            },
            "inrush_a": {
              "type": "number",
              "minimum": 0,
              "description": "Inrush current in amperes"
            }
          }
        },
        "power": {
          "type": "object",
          "required": ["max_watts"],
          "properties": {
            "max_watts": {
              "type": "number",
              "minimum": 0,
              "description": "Maximum power consumption in watts"
            },
            "standby_watts": {
              "type": "number",
              "minimum": 0,
              "description": "Standby power consumption in watts"
            }
          }
        },
        "ripple_mv": {
          "type": "number",
          "minimum": 0,
          "description": "Maximum output ripple in millivolts"
        }
      }
    },
    "environmental": {
      "type": "object",
      "required": ["temperature_range", "do160_category"],
      "properties": {
        "temperature_range": {
          "type": "object",
          "required": ["min_celsius", "max_celsius"],
          "properties": {
            "min_celsius": {
              "type": "number",
              "description": "Minimum operating temperature in Celsius"
            },
            "max_celsius": {
              "type": "number",
              "description": "Maximum operating temperature in Celsius"
            },
            "storage_min_celsius": {
              "type": "number",
              "description": "Minimum storage temperature"
            },
            "storage_max_celsius": {
              "type": "number",
              "description": "Maximum storage temperature"
            }
          }
        },
        "do160_category": {
          "type": "string",
          "description": "DO-160 environmental category"
        },
        "ip_rating": {
          "type": "string",
          "pattern": "^IP[0-9]{2}$",
          "description": "Ingress Protection rating (e.g., IP65)"
        },
        "humidity_percent": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Maximum relative humidity percentage"
        }
      }
    },
    "lifetime": {
      "type": "object",
      "properties": {
        "l70_hours": {
          "type": "integer",
          "minimum": 0,
          "description": "L70 lifetime in hours (70% lumen maintenance)"
        },
        "lx_hours": {
          "type": "integer",
          "minimum": 0,
          "description": "Lx lifetime in hours (custom lumen maintenance)"
        },
        "mtbf_hours": {
          "type": "integer",
          "minimum": 0,
          "description": "Mean Time Between Failures in hours"
        }
      }
    },
    "regulatory": {
      "type": "object",
      "properties": {
        "faa_tso": {
          "type": "string",
          "description": "FAA TSO authorization (if applicable)"
        },
        "easa_etso": {
          "type": "string",
          "description": "EASA ETSO authorization (if applicable)"
        },
        "sae_standard": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Applicable SAE standards (e.g., AS8037, AS8038)"
        }
      }
    },
    "materials": {
      "type": "object",
      "properties": {
        "lens_material": {
          "type": "string",
          "description": "Lens material (e.g., polycarbonate, acrylic, glass)"
        },
        "housing_material": {
          "type": "string",
          "description": "Housing material (e.g., aluminum, composite)"
        },
        "finish": {
          "type": "string",
          "description": "Surface finish specification"
        }
      }
    },
    "traceability": {
      "type": "object",
      "properties": {
        "supplier": {
          "type": "string",
          "description": "Approved supplier name"
        },
        "part_number": {
          "type": "string",
          "description": "Manufacturer part number"
        },
        "coc_required": {
          "type": "boolean",
          "description": "Certificate of Conformance required"
        }
      }
    }
  }
}
