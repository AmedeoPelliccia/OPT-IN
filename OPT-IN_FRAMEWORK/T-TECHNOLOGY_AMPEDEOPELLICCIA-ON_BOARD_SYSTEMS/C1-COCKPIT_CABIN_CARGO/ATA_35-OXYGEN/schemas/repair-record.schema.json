{
  "$schema":"http://json-schema.org/draft-07/schema#",
  "schema_version":"1.0",
  "title":"Repair Record - Oxygen",
  "type":"object",
  "required":["id","msn","component_id","date","disposition","approvals"],
  "properties":{
    "id":{"type":"string"},
    "msn":{"type":"string"},
    "component_id":{"type":"string"},
    "location_station":{"type":"string"},
    "date":{"type":"string","format":"date"},
    "damage_description":{"type":"string"},
    "cylinder_data":{
      "type":"object",
      "properties":{
        "serial":{"type":"string"},
        "part_number":{"type":"string"},
        "manufacturer":{"type":"string"},
        "service_pressure_bar":{"type":"number"},
        "last_hydro_test_date":{"type":"string","format":"date"},
        "coc":{"type":"string"}
      }
    },
    "materials":{
      "type":"array",
      "items":{
        "type":"object",
        "properties":{
          "part_number":{"type":"string"},
          "lot":{"type":"string"},
          "oxygen_compatible":{"type":"boolean"}
        }
      }
    },
    "ndt_reports":{
      "type":"array",
      "items":{
        "type":"object",
        "properties":{
          "method":{"type":"string"},
          "file_hash":{"type":"string"}
        }
      }
    },
    "pressure_test":{
      "type":"object",
      "properties":{
        "test_pressure_bar":{"type":"number"},
        "leak_rate_mbar_l_s":{"type":"number"},
        "duration_minutes":{"type":"number"},
        "result":{"type":"string","enum":["Pass","Fail"]}
      }
    },
    "functional_test":{
      "type":"object",
      "properties":{
        "regulator_output_pressure_kpa":{"type":"number"},
        "flow_rate_lpm":{"type":"number"},
        "mask_deployment_time_s":{"type":"number"},
        "result":{"type":"string","enum":["Pass","Fail"]}
      }
    },
    "oxygen_purity":{
      "type":"object",
      "properties":{
        "lot_number":{"type":"string"},
        "purity_percent":{"type":"number"},
        "certificate_number":{"type":"string"}
      }
    },
    "disposition":{
      "type":"string",
      "enum":["Negligible","Repairable","Replace","Engineering Disposition"]
    },
    "approvals":{
      "type":"array",
      "items":{
        "type":"object",
        "required":["authority","status","date"],
        "properties":{
          "authority":{"type":"string"},
          "status":{"type":"string"},
          "date":{"type":"string","format":"date"}
        }
      }
    }
  }
}
